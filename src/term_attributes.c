#ifdef __linux__
#define _XOPEN_SOURCE
#define _POSIX_C_SOURCE 200809L
#define _GNU_SOURCE
#endif

#include <ctype.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <iniparser/dictionary.h>

#include "prompt2-utils.h"
#include "term_attributes.h"


struct EscapeCode attributes[] = {

  // reset
  { "reset",              "0" },
  { "reset bold/dim",     "22" },
  { "reset italic",       "23" },
  { "reset underline",    "24" },
  { "reset blink",        "25" },
  { "reset reverse",      "27" },
  { "reset hidden",       "28" },
  { "reset fg",           "39" },
  { "reset bg",           "49" },

  // style
  { "bold",               "1" },
  { "dim",                "2" },
  { "italic",             "3" },
  { "underline",          "4" },
  { "blink",              "5" },
  { "reverse",            "7" },
  { "hidden",             "8" },
  { "strikethrough",      "9" },

  // Reserved colours by name, foreground            Reserved colours by slot, foreground
  { "fg black",           "30" },                    { "fg c0",          "30" },
  { "fg red",             "31" },                    { "fg c1",          "31" },
  { "fg green",           "32" },                    { "fg c2",          "32" },
  { "fg yellow",          "33" },                    { "fg c3",          "33" },
  { "fg blue",            "34" },                    { "fg c4",          "34" },
  { "fg magenta",         "35" },                    { "fg c5",          "35" },
  { "fg cyan",            "36" },                    { "fg c6",          "36" },
  { "fg white",           "37" },                    { "fg c7",          "37" },

  // Reserved bright colours by name, foreground     Reserved bright colours by slot, foregroun
  { "fg bright black",    "90" },                    { "fg bright c0",   "90" },
  { "fg bright red",      "91" },                    { "fg bright c1",   "91" },
  { "fg bright green",    "92" },                    { "fg bright c2",   "92" },
  { "fg bright yellow",   "93" },                    { "fg bright c3",   "93" },
  { "fg bright blue",     "94" },                    { "fg bright c4",   "94" },
  { "fg bright magenta",  "95" },                    { "fg bright c5",   "95" },
  { "fg bright cyan",     "96" },                    { "fg bright c6",   "96" },
  { "fg bright white",    "97" },                    { "fg bright c7",   "97" },

  // Reserved colours by name, background            Reserved colours by slot, background
  { "bg black",           "40" },                    { "bg c0",          "40" },
  { "bg red",             "41" },                    { "bg c1",          "41" },
  { "bg green",           "42" },                    { "bg c2",          "42" },
  { "bg yellow",          "43" },                    { "bg c3",          "43" },
  { "bg blue",            "44" },                    { "bg c4",          "44" },
  { "bg magenta",         "45" },                    { "bg c5",          "45" },
  { "bg cyan",            "46" },                    { "bg c6",          "46" },
  { "bg white",           "47" },                    { "bg c7",          "47" },

  // Reserved bright colours by name, background     Reserved bright colours by slot, background
  { "bg bright black",    "100" },                   { "bg bright c0",   "100" },
  { "bg bright red",      "101" },                   { "bg bright c1",   "101" },
  { "bg bright green",    "102" },                   { "bg bright c2",   "102" },
  { "bg bright yellow",   "103" },                   { "bg bright c3",   "103" },
  { "bg bright blue",     "104" },                   { "bg bright c4",   "104" },
  { "bg bright magenta",  "105" },                   { "bg bright c5",   "105" },
  { "bg bright cyan",     "106" },                   { "bg bright c6",   "106" },
  { "bg bright white",    "107" },                   { "bg bright c7",   "107" },

  // rgb colours, foreground
  { "fg-snow",                  "38;2;255;250;250"  },
  { "fg-ghostwhite",            "38;2;248;248;255"  },
  { "fg-whitesmoke",            "38;2;245;245;245"  },
  { "fg-gainsboro",             "38;2;220;220;220"  },
  { "fg-floralwhite",           "38;2;255;250;240"  },
  { "fg-oldlace",               "38;2;253;245;230"  },
  { "fg-linen",                 "38;2;250;240;230"  },
  { "fg-antiquewhite",          "38;2;250;235;215"  },
  { "fg-papayawhip",            "38;2;255;239;213"  },
  { "fg-blanchedalmond",        "38;2;255;235;205"  },
  { "fg-bisque",                "38;2;255;228;196"  },
  { "fg-peachpuff",             "38;2;255;218;185"  },
  { "fg-navajowhite",           "38;2;255;222;173"  },
  { "fg-moccasin",              "38;2;255;228;181"  },
  { "fg-cornsilk",              "38;2;255;248;220"  },
  { "fg-ivory",                 "38;2;255;255;240"  },
  { "fg-lemonchiffon",          "38;2;255;250;205"  },
  { "fg-seashell",              "38;2;255;245;238"  },
  { "fg-honeydew",              "38;2;240;255;240"  },
  { "fg-mintcream",             "38;2;245;255;250"  },
  { "fg-azure",                 "38;2;240;255;255"  },
  { "fg-aliceblue",             "38;2;240;248;255"  },
  { "fg-lavender",              "38;2;230;230;250"  },
  { "fg-lavenderblush",         "38;2;255;240;245"  },
  { "fg-mistyrose",             "38;2;255;228;225"  },
  { "fg-white",                 "38;2;255;255;255"  },
  { "fg-black",                 "38;2;0;0;0"        },
  { "fg-darkslategray",         "38;2;47;79;79"     },
  { "fg-darkslategrey",         "38;2;47;79;79"     },
  { "fg-dimgray",               "38;2;105;105;105"  },
  { "fg-dimgrey",               "38;2;105;105;105"  },
  { "fg-slategray",             "38;2;112;128;144"  },
  { "fg-slategrey",             "38;2;112;128;144"  },
  { "fg-lightslategray",        "38;2;119;136;153"  },
  { "fg-lightslategrey",        "38;2;119;136;153"  },
  { "fg-gray",                  "38;2;190;190;190"  },
  { "fg-grey",                  "38;2;190;190;190"  },
  { "fg-lightgrey",             "38;2;211;211;211"  },
  { "fg-lightgray",             "38;2;211;211;211"  },
  { "fg-midnightblue",          "38;2;25;25;112"    },
  { "fg-navy",                  "38;2;0;0;128"      },
  { "fg-navyblue",              "38;2;0;0;128"      },
  { "fg-cornflowerblue",        "38;2;100;149;237"  },
  { "fg-darkslateblue",         "38;2;72;61;139"    },
  { "fg-slateblue",             "38;2;106;90;205"   },
  { "fg-mediumslateblue",       "38;2;123;104;238"  },
  { "fg-lightslateblue",        "38;2;132;112;255"  },
  { "fg-mediumblue",            "38;2;0;0;205"      },
  { "fg-royalblue",             "38;2;65;105;225"   },
  { "fg-blue",                  "38;2;0;0;255"      },
  { "fg-dodgerblue",            "38;2;30;144;255"   },
  { "fg-deepskyblue",           "38;2;0;191;255"    },
  { "fg-skyblue",               "38;2;135;206;235"  },
  { "fg-lightskyblue",          "38;2;135;206;250"  },
  { "fg-steelblue",             "38;2;70;130;180"   },
  { "fg-lightsteelblue",        "38;2;176;196;222"  },
  { "fg-lightblue",             "38;2;173;216;230"  },
  { "fg-powderblue",            "38;2;176;224;230"  },
  { "fg-paleturquoise",         "38;2;175;238;238"  },
  { "fg-darkturquoise",         "38;2;0;206;209"    },
  { "fg-mediumturquoise",       "38;2;72;209;204"   },
  { "fg-turquoise",             "38;2;64;224;208"   },
  { "fg-cyan",                  "38;2;0;255;255"    },
  { "fg-lightcyan",             "38;2;224;255;255"  },
  { "fg-cadetblue",             "38;2;95;158;160"   },
  { "fg-mediumaquamarine",      "38;2;102;205;170"  },
  { "fg-aquamarine",            "38;2;127;255;212"  },
  { "fg-darkgreen",             "38;2;0;100;0"      },
  { "fg-darkolivegreen",        "38;2;85;107;47"    },
  { "fg-darkseagreen",          "38;2;143;188;143"  },
  { "fg-seagreen",              "38;2;46;139;87"    },
  { "fg-mediumseagreen",        "38;2;60;179;113"   },
  { "fg-lightseagreen",         "38;2;32;178;170"   },
  { "fg-palegreen",             "38;2;152;251;152"  },
  { "fg-springgreen",           "38;2;0;255;127"    },
  { "fg-lawngreen",             "38;2;124;252;0"    },
  { "fg-green",                 "38;2;0;255;0"      },
  { "fg-chartreuse",            "38;2;127;255;0"    },
  { "fg-mediumspringgreen",     "38;2;0;250;154"    },
  { "fg-greenyellow",           "38;2;173;255;47"   },
  { "fg-limegreen",             "38;2;50;205;50"    },
  { "fg-yellowgreen",           "38;2;154;205;50"   },
  { "fg-forestgreen",           "38;2;34;139;34"    },
  { "fg-olivedrab",             "38;2;107;142;35"   },
  { "fg-darkkhaki",             "38;2;189;183;107"  },
  { "fg-khaki",                 "38;2;240;230;140"  },
  { "fg-palegoldenrod",         "38;2;238;232;170"  },
  { "fg-lightgoldenrodyellow",  "38;2;250;250;210"  },
  { "fg-lightyellow",           "38;2;255;255;224"  },
  { "fg-yellow",                "38;2;255;255;0"    },
  { "fg-gold",                  "38;2;255;215;0"    },
  { "fg-lightgoldenrod",        "38;2;238;221;130"  },
  { "fg-goldenrod",             "38;2;218;165;32"   },
  { "fg-darkgoldenrod",         "38;2;184;134;11"   },
  { "fg-rosybrown",             "38;2;188;143;143"  },
  { "fg-indianred",             "38;2;205;92;92"    },
  { "fg-saddlebrown",           "38;2;139;69;19"    },
  { "fg-sienna",                "38;2;160;82;45"    },
  { "fg-peru",                  "38;2;205;133;63"   },
  { "fg-burlywood",             "38;2;222;184;135"  },
  { "fg-beige",                 "38;2;245;245;220"  },
  { "fg-wheat",                 "38;2;245;222;179"  },
  { "fg-sandybrown",            "38;2;244;164;96"   },
  { "fg-tan",                   "38;2;210;180;140"  },
  { "fg-chocolate",             "38;2;210;105;30"   },
  { "fg-firebrick",             "38;2;178;34;34"    },
  { "fg-brown",                 "38;2;165;42;42"    },
  { "fg-darksalmon",            "38;2;233;150;122"  },
  { "fg-salmon",                "38;2;250;128;114"  },
  { "fg-lightsalmon",           "38;2;255;160;122"  },
  { "fg-orange",                "38;2;255;165;0"    },
  { "fg-darkorange",            "38;2;255;140;0"    },
  { "fg-coral",                 "38;2;255;127;80"   },
  { "fg-lightcoral",            "38;2;240;128;128"  },
  { "fg-tomato",                "38;2;255;99;71"    },
  { "fg-orangered",             "38;2;255;69;0"     },
  { "fg-red",                   "38;2;255;0;0"      },
  { "fg-hotpink",               "38;2;255;105;180"  },
  { "fg-deeppink",              "38;2;255;20;147"   },
  { "fg-pink",                  "38;2;255;192;203"  },
  { "fg-lightpink",             "38;2;255;182;193"  },
  { "fg-palevioletred",         "38;2;219;112;147"  },
  { "fg-maroon",                "38;2;176;48;96"    },
  { "fg-mediumvioletred",       "38;2;199;21;133"   },
  { "fg-violetred",             "38;2;208;32;144"   },
  { "fg-magenta",               "38;2;255;0;255"    },
  { "fg-violet",                "38;2;238;130;238"  },
  { "fg-plum",                  "38;2;221;160;221"  },
  { "fg-orchid",                "38;2;218;112;214"  },
  { "fg-mediumorchid",          "38;2;186;85;211"   },
  { "fg-darkorchid",            "38;2;153;50;204"   },
  { "fg-darkviolet",            "38;2;148;0;211"    },
  { "fg-blueviolet",            "38;2;138;43;226"   },
  { "fg-purple",                "38;2;160;32;240"   },
  { "fg-mediumpurple",          "38;2;147;112;219"  },
  { "fg-thistle",               "38;2;216;191;216"  },
  { "fg-snow1",                 "38;2;255;250;250"  },
  { "fg-snow2",                 "38;2;238;233;233"  },
  { "fg-snow3",                 "38;2;205;201;201"  },
  { "fg-snow4",                 "38;2;139;137;137"  },
  { "fg-seashell1",             "38;2;255;245;238"  },
  { "fg-seashell2",             "38;2;238;229;222"  },
  { "fg-seashell3",             "38;2;205;197;191"  },
  { "fg-seashell4",             "38;2;139;134;130"  },
  { "fg-antiquewhite1",         "38;2;255;239;219"  },
  { "fg-antiquewhite2",         "38;2;238;223;204"  },
  { "fg-antiquewhite3",         "38;2;205;192;176"  },
  { "fg-antiquewhite4",         "38;2;139;131;120"  },
  { "fg-bisque1",               "38;2;255;228;196"  },
  { "fg-bisque2",               "38;2;238;213;183"  },
  { "fg-bisque3",               "38;2;205;183;158"  },
  { "fg-bisque4",               "38;2;139;125;107"  },
  { "fg-peachpuff1",            "38;2;255;218;185"  },
  { "fg-peachpuff2",            "38;2;238;203;173"  },
  { "fg-peachpuff3",            "38;2;205;175;149"  },
  { "fg-peachpuff4",            "38;2;139;119;101"  },
  { "fg-navajowhite1",          "38;2;255;222;173"  },
  { "fg-navajowhite2",          "38;2;238;207;161"  },
  { "fg-navajowhite3",          "38;2;205;179;139"  },
  { "fg-navajowhite4",          "38;2;139;121;94"   },
  { "fg-lemonchiffon1",         "38;2;255;250;205"  },
  { "fg-lemonchiffon2",         "38;2;238;233;191"  },
  { "fg-lemonchiffon3",         "38;2;205;201;165"  },
  { "fg-lemonchiffon4",         "38;2;139;137;112"  },
  { "fg-cornsilk1",             "38;2;255;248;220"  },
  { "fg-cornsilk2",             "38;2;238;232;205"  },
  { "fg-cornsilk3",             "38;2;205;200;177"  },
  { "fg-cornsilk4",             "38;2;139;136;120"  },
  { "fg-ivory1",                "38;2;255;255;240"  },
  { "fg-ivory2",                "38;2;238;238;224"  },
  { "fg-ivory3",                "38;2;205;205;193"  },
  { "fg-ivory4",                "38;2;139;139;131"  },
  { "fg-honeydew1",             "38;2;240;255;240"  },
  { "fg-honeydew2",             "38;2;224;238;224"  },
  { "fg-honeydew3",             "38;2;193;205;193"  },
  { "fg-honeydew4",             "38;2;131;139;131"  },
  { "fg-lavenderblush1",        "38;2;255;240;245"  },
  { "fg-lavenderblush2",        "38;2;238;224;229"  },
  { "fg-lavenderblush3",        "38;2;205;193;197"  },
  { "fg-lavenderblush4",        "38;2;139;131;134"  },
  { "fg-mistyrose1",            "38;2;255;228;225"  },
  { "fg-mistyrose2",            "38;2;238;213;210"  },
  { "fg-mistyrose3",            "38;2;205;183;181"  },
  { "fg-mistyrose4",            "38;2;139;125;123"  },
  { "fg-azure1",                "38;2;240;255;255"  },
  { "fg-azure2",                "38;2;224;238;238"  },
  { "fg-azure3",                "38;2;193;205;205"  },
  { "fg-azure4",                "38;2;131;139;139"  },
  { "fg-slateblue1",            "38;2;131;111;255"  },
  { "fg-slateblue2",            "38;2;122;103;238"  },
  { "fg-slateblue3",            "38;2;105;89;205"   },
  { "fg-slateblue4",            "38;2;71;60;139"    },
  { "fg-royalblue1",            "38;2;72;118;255"   },
  { "fg-royalblue2",            "38;2;67;110;238"   },
  { "fg-royalblue3",            "38;2;58;95;205"    },
  { "fg-royalblue4",            "38;2;39;64;139"    },
  { "fg-blue1",                 "38;2;0;0;255"      },
  { "fg-blue2",                 "38;2;0;0;238"      },
  { "fg-blue3",                 "38;2;0;0;205"      },
  { "fg-blue4",                 "38;2;0;0;139"      },
  { "fg-dodgerblue1",           "38;2;30;144;255"   },
  { "fg-dodgerblue2",           "38;2;28;134;238"   },
  { "fg-dodgerblue3",           "38;2;24;116;205"   },
  { "fg-dodgerblue4",           "38;2;16;78;139"    },
  { "fg-steelblue1",            "38;2;99;184;255"   },
  { "fg-steelblue2",            "38;2;92;172;238"   },
  { "fg-steelblue3",            "38;2;79;148;205"   },
  { "fg-steelblue4",            "38;2;54;100;139"   },
  { "fg-deepskyblue1",          "38;2;0;191;255"    },
  { "fg-deepskyblue2",          "38;2;0;178;238"    },
  { "fg-deepskyblue3",          "38;2;0;154;205"    },
  { "fg-deepskyblue4",          "38;2;0;104;139"    },
  { "fg-skyblue1",              "38;2;135;206;255"  },
  { "fg-skyblue2",              "38;2;126;192;238"  },
  { "fg-skyblue3",              "38;2;108;166;205"  },
  { "fg-skyblue4",              "38;2;74;112;139"   },
  { "fg-lightskyblue1",         "38;2;176;226;255"  },
  { "fg-lightskyblue2",         "38;2;164;211;238"  },
  { "fg-lightskyblue3",         "38;2;141;182;205"  },
  { "fg-lightskyblue4",         "38;2;96;123;139"   },
  { "fg-slategray1",            "38;2;198;226;255"  },
  { "fg-slategray2",            "38;2;185;211;238"  },
  { "fg-slategray3",            "38;2;159;182;205"  },
  { "fg-slategray4",            "38;2;108;123;139"  },
  { "fg-lightsteelblue1",       "38;2;202;225;255"  },
  { "fg-lightsteelblue2",       "38;2;188;210;238"  },
  { "fg-lightsteelblue3",       "38;2;162;181;205"  },
  { "fg-lightsteelblue4",       "38;2;110;123;139"  },
  { "fg-lightblue1",            "38;2;191;239;255"  },
  { "fg-lightblue2",            "38;2;178;223;238"  },
  { "fg-lightblue3",            "38;2;154;192;205"  },
  { "fg-lightblue4",            "38;2;104;131;139"  },
  { "fg-lightcyan1",            "38;2;224;255;255"  },
  { "fg-lightcyan2",            "38;2;209;238;238"  },
  { "fg-lightcyan3",            "38;2;180;205;205"  },
  { "fg-lightcyan4",            "38;2;122;139;139"  },
  { "fg-paleturquoise1",        "38;2;187;255;255"  },
  { "fg-paleturquoise2",        "38;2;174;238;238"  },
  { "fg-paleturquoise3",        "38;2;150;205;205"  },
  { "fg-paleturquoise4",        "38;2;102;139;139"  },
  { "fg-cadetblue1",            "38;2;152;245;255"  },
  { "fg-cadetblue2",            "38;2;142;229;238"  },
  { "fg-cadetblue3",            "38;2;122;197;205"  },
  { "fg-cadetblue4",            "38;2;83;134;139"   },
  { "fg-turquoise1",            "38;2;0;245;255"    },
  { "fg-turquoise2",            "38;2;0;229;238"    },
  { "fg-turquoise3",            "38;2;0;197;205"    },
  { "fg-turquoise4",            "38;2;0;134;139"    },
  { "fg-cyan1",                 "38;2;0;255;255"    },
  { "fg-cyan2",                 "38;2;0;238;238"    },
  { "fg-cyan3",                 "38;2;0;205;205"    },
  { "fg-cyan4",                 "38;2;0;139;139"    },
  { "fg-darkslategray1",        "38;2;151;255;255"  },
  { "fg-darkslategray2",        "38;2;141;238;238"  },
  { "fg-darkslategray3",        "38;2;121;205;205"  },
  { "fg-darkslategray4",        "38;2;82;139;139"   },
  { "fg-aquamarine1",           "38;2;127;255;212"  },
  { "fg-aquamarine2",           "38;2;118;238;198"  },
  { "fg-aquamarine3",           "38;2;102;205;170"  },
  { "fg-aquamarine4",           "38;2;69;139;116"   },
  { "fg-darkseagreen1",         "38;2;193;255;193"  },
  { "fg-darkseagreen2",         "38;2;180;238;180"  },
  { "fg-darkseagreen3",         "38;2;155;205;155"  },
  { "fg-darkseagreen4",         "38;2;105;139;105"  },
  { "fg-seagreen1",             "38;2;84;255;159"   },
  { "fg-seagreen2",             "38;2;78;238;148"   },
  { "fg-seagreen3",             "38;2;67;205;128"   },
  { "fg-seagreen4",             "38;2;46;139;87"    },
  { "fg-palegreen1",            "38;2;154;255;154"  },
  { "fg-palegreen2",            "38;2;144;238;144"  },
  { "fg-palegreen3",            "38;2;124;205;124"  },
  { "fg-palegreen4",            "38;2;84;139;84"    },
  { "fg-springgreen1",          "38;2;0;255;127"    },
  { "fg-springgreen2",          "38;2;0;238;118"    },
  { "fg-springgreen3",          "38;2;0;205;102"    },
  { "fg-springgreen4",          "38;2;0;139;69"     },
  { "fg-green1",                "38;2;0;255;0"      },
  { "fg-green2",                "38;2;0;238;0"      },
  { "fg-green3",                "38;2;0;205;0"      },
  { "fg-green4",                "38;2;0;139;0"      },
  { "fg-chartreuse1",           "38;2;127;255;0"    },
  { "fg-chartreuse2",           "38;2;118;238;0"    },
  { "fg-chartreuse3",           "38;2;102;205;0"    },
  { "fg-chartreuse4",           "38;2;69;139;0"     },
  { "fg-olivedrab1",            "38;2;192;255;62"   },
  { "fg-olivedrab2",            "38;2;179;238;58"   },
  { "fg-olivedrab3",            "38;2;154;205;50"   },
  { "fg-olivedrab4",            "38;2;105;139;34"   },
  { "fg-darkolivegreen1",       "38;2;202;255;112"  },
  { "fg-darkolivegreen2",       "38;2;188;238;104"  },
  { "fg-darkolivegreen3",       "38;2;162;205;90"   },
  { "fg-darkolivegreen4",       "38;2;110;139;61"   },
  { "fg-khaki1",                "38;2;255;246;143"  },
  { "fg-khaki2",                "38;2;238;230;133"  },
  { "fg-khaki3",                "38;2;205;198;115"  },
  { "fg-khaki4",                "38;2;139;134;78"   },
  { "fg-lightgoldenrod1",       "38;2;255;236;139"  },
  { "fg-lightgoldenrod2",       "38;2;238;220;130"  },
  { "fg-lightgoldenrod3",       "38;2;205;190;112"  },
  { "fg-lightgoldenrod4",       "38;2;139;129;76"   },
  { "fg-lightyellow1",          "38;2;255;255;224"  },
  { "fg-lightyellow2",          "38;2;238;238;209"  },
  { "fg-lightyellow3",          "38;2;205;205;180"  },
  { "fg-lightyellow4",          "38;2;139;139;122"  },
  { "fg-yellow1",               "38;2;255;255;0"    },
  { "fg-yellow2",               "38;2;238;238;0"    },
  { "fg-yellow3",               "38;2;205;205;0"    },
  { "fg-yellow4",               "38;2;139;139;0"    },
  { "fg-gold1",                 "38;2;255;215;0"    },
  { "fg-gold2",                 "38;2;238;201;0"    },
  { "fg-gold3",                 "38;2;205;173;0"    },
  { "fg-gold4",                 "38;2;139;117;0"    },
  { "fg-goldenrod1",            "38;2;255;193;37"   },
  { "fg-goldenrod2",            "38;2;238;180;34"   },
  { "fg-goldenrod3",            "38;2;205;155;29"   },
  { "fg-goldenrod4",            "38;2;139;105;20"   },
  { "fg-darkgoldenrod1",        "38;2;255;185;15"   },
  { "fg-darkgoldenrod2",        "38;2;238;173;14"   },
  { "fg-darkgoldenrod3",        "38;2;205;149;12"   },
  { "fg-darkgoldenrod4",        "38;2;139;101;8"    },
  { "fg-rosybrown1",            "38;2;255;193;193"  },
  { "fg-rosybrown2",            "38;2;238;180;180"  },
  { "fg-rosybrown3",            "38;2;205;155;155"  },
  { "fg-rosybrown4",            "38;2;139;105;105"  },
  { "fg-indianred1",            "38;2;255;106;106"  },
  { "fg-indianred2",            "38;2;238;99;99"    },
  { "fg-indianred3",            "38;2;205;85;85"    },
  { "fg-indianred4",            "38;2;139;58;58"    },
  { "fg-sienna1",               "38;2;255;130;71"   },
  { "fg-sienna2",               "38;2;238;121;66"   },
  { "fg-sienna3",               "38;2;205;104;57"   },
  { "fg-sienna4",               "38;2;139;71;38"    },
  { "fg-burlywood1",            "38;2;255;211;155"  },
  { "fg-burlywood2",            "38;2;238;197;145"  },
  { "fg-burlywood3",            "38;2;205;170;125"  },
  { "fg-burlywood4",            "38;2;139;115;85"   },
  { "fg-wheat1",                "38;2;255;231;186"  },
  { "fg-wheat2",                "38;2;238;216;174"  },
  { "fg-wheat3",                "38;2;205;186;150"  },
  { "fg-wheat4",                "38;2;139;126;102"  },
  { "fg-tan1",                  "38;2;255;165;79"   },
  { "fg-tan2",                  "38;2;238;154;73"   },
  { "fg-tan3",                  "38;2;205;133;63"   },
  { "fg-tan4",                  "38;2;139;90;43"    },
  { "fg-chocolate1",            "38;2;255;127;36"   },
  { "fg-chocolate2",            "38;2;238;118;33"   },
  { "fg-chocolate3",            "38;2;205;102;29"   },
  { "fg-chocolate4",            "38;2;139;69;19"    },
  { "fg-firebrick1",            "38;2;255;48;48"    },
  { "fg-firebrick2",            "38;2;238;44;44"    },
  { "fg-firebrick3",            "38;2;205;38;38"    },
  { "fg-firebrick4",            "38;2;139;26;26"    },
  { "fg-brown1",                "38;2;255;64;64"    },
  { "fg-brown2",                "38;2;238;59;59"    },
  { "fg-brown3",                "38;2;205;51;51"    },
  { "fg-brown4",                "38;2;139;35;35"    },
  { "fg-salmon1",               "38;2;255;140;105"  },
  { "fg-salmon2",               "38;2;238;130;98"   },
  { "fg-salmon3",               "38;2;205;112;84"   },
  { "fg-salmon4",               "38;2;139;76;57"    },
  { "fg-lightsalmon1",          "38;2;255;160;122"  },
  { "fg-lightsalmon2",          "38;2;238;149;114"  },
  { "fg-lightsalmon3",          "38;2;205;129;98"   },
  { "fg-lightsalmon4",          "38;2;139;87;66"    },
  { "fg-orange1",               "38;2;255;165;0"    },
  { "fg-orange2",               "38;2;238;154;0"    },
  { "fg-orange3",               "38;2;205;133;0"    },
  { "fg-orange4",               "38;2;139;90;0"     },
  { "fg-darkorange1",           "38;2;255;127;0"    },
  { "fg-darkorange2",           "38;2;238;118;0"    },
  { "fg-darkorange3",           "38;2;205;102;0"    },
  { "fg-darkorange4",           "38;2;139;69;0"     },
  { "fg-coral1",                "38;2;255;114;86"   },
  { "fg-coral2",                "38;2;238;106;80"   },
  { "fg-coral3",                "38;2;205;91;69"    },
  { "fg-coral4",                "38;2;139;62;47"    },
  { "fg-tomato1",               "38;2;255;99;71"    },
  { "fg-tomato2",               "38;2;238;92;66"    },
  { "fg-tomato3",               "38;2;205;79;57"    },
  { "fg-tomato4",               "38;2;139;54;38"    },
  { "fg-orangered1",            "38;2;255;69;0"     },
  { "fg-orangered2",            "38;2;238;64;0"     },
  { "fg-orangered3",            "38;2;205;55;0"     },
  { "fg-orangered4",            "38;2;139;37;0"     },
  { "fg-red1",                  "38;2;255;0;0"      },
  { "fg-red2",                  "38;2;238;0;0"      },
  { "fg-red3",                  "38;2;205;0;0"      },
  { "fg-red4",                  "38;2;139;0;0"      },
  { "fg-debianred",             "38;2;215;7;81"     },
  { "fg-deeppink1",             "38;2;255;20;147"   },
  { "fg-deeppink2",             "38;2;238;18;137"   },
  { "fg-deeppink3",             "38;2;205;16;118"   },
  { "fg-deeppink4",             "38;2;139;10;80"    },
  { "fg-hotpink1",              "38;2;255;110;180"  },
  { "fg-hotpink2",              "38;2;238;106;167"  },
  { "fg-hotpink3",              "38;2;205;96;144"   },
  { "fg-hotpink4",              "38;2;139;58;98"    },
  { "fg-pink1",                 "38;2;255;181;197"  },
  { "fg-pink2",                 "38;2;238;169;184"  },
  { "fg-pink3",                 "38;2;205;145;158"  },
  { "fg-pink4",                 "38;2;139;99;108"   },
  { "fg-lightpink1",            "38;2;255;174;185"  },
  { "fg-lightpink2",            "38;2;238;162;173"  },
  { "fg-lightpink3",            "38;2;205;140;149"  },
  { "fg-lightpink4",            "38;2;139;95;101"   },
  { "fg-palevioletred1",        "38;2;255;130;171"  },
  { "fg-palevioletred2",        "38;2;238;121;159"  },
  { "fg-palevioletred3",        "38;2;205;104;137"  },
  { "fg-palevioletred4",        "38;2;139;71;93"    },
  { "fg-maroon1",               "38;2;255;52;179"   },
  { "fg-maroon2",               "38;2;238;48;167"   },
  { "fg-maroon3",               "38;2;205;41;144"   },
  { "fg-maroon4",               "38;2;139;28;98"    },
  { "fg-violetred1",            "38;2;255;62;150"   },
  { "fg-violetred2",            "38;2;238;58;140"   },
  { "fg-violetred3",            "38;2;205;50;120"   },
  { "fg-violetred4",            "38;2;139;34;82"    },
  { "fg-magenta1",              "38;2;255;0;255"    },
  { "fg-magenta2",              "38;2;238;0;238"    },
  { "fg-magenta3",              "38;2;205;0;205"    },
  { "fg-magenta4",              "38;2;139;0;139"    },
  { "fg-orchid1",               "38;2;255;131;250"  },
  { "fg-orchid2",               "38;2;238;122;233"  },
  { "fg-orchid3",               "38;2;205;105;201"  },
  { "fg-orchid4",               "38;2;139;71;137"   },
  { "fg-plum1",                 "38;2;255;187;255"  },
  { "fg-plum2",                 "38;2;238;174;238"  },
  { "fg-plum3",                 "38;2;205;150;205"  },
  { "fg-plum4",                 "38;2;139;102;139"  },
  { "fg-mediumorchid1",         "38;2;224;102;255"  },
  { "fg-mediumorchid2",         "38;2;209;95;238"   },
  { "fg-mediumorchid3",         "38;2;180;82;205"   },
  { "fg-mediumorchid4",         "38;2;122;55;139"   },
  { "fg-darkorchid1",           "38;2;191;62;255"   },
  { "fg-darkorchid2",           "38;2;178;58;238"   },
  { "fg-darkorchid3",           "38;2;154;50;205"   },
  { "fg-darkorchid4",           "38;2;104;34;139"   },
  { "fg-purple1",               "38;2;155;48;255"   },
  { "fg-purple2",               "38;2;145;44;238"   },
  { "fg-purple3",               "38;2;125;38;205"   },
  { "fg-purple4",               "38;2;85;26;139"    },
  { "fg-mediumpurple1",         "38;2;171;130;255"  },
  { "fg-mediumpurple2",         "38;2;159;121;238"  },
  { "fg-mediumpurple3",         "38;2;137;104;205"  },
  { "fg-mediumpurple4",         "38;2;93;71;139"    },
  { "fg-thistle1",              "38;2;255;225;255"  },
  { "fg-thistle2",              "38;2;238;210;238"  },
  { "fg-thistle3",              "38;2;205;181;205"  },
  { "fg-thistle4",              "38;2;139;123;139"  },
  { "fg-gray0",                 "38;2;0;0;0"        },
  { "fg-grey0",                 "38;2;0;0;0"        },
  { "fg-gray1",                 "38;2;3;3;3"        },
  { "fg-grey1",                 "38;2;3;3;3"        },
  { "fg-gray2",                 "38;2;5;5;5"        },
  { "fg-grey2",                 "38;2;5;5;5"        },
  { "fg-gray3",                 "38;2;8;8;8"        },
  { "fg-grey3",                 "38;2;8;8;8"        },
  { "fg-gray4",                 "38;2;10;10;10"     },
  { "fg-grey4",                 "38;2;10;10;10"     },
  { "fg-gray5",                 "38;2;13;13;13"     },
  { "fg-grey5",                 "38;2;13;13;13"     },
  { "fg-gray6",                 "38;2;15;15;15"     },
  { "fg-grey6",                 "38;2;15;15;15"     },
  { "fg-gray7",                 "38;2;18;18;18"     },
  { "fg-grey7",                 "38;2;18;18;18"     },
  { "fg-gray8",                 "38;2;20;20;20"     },
  { "fg-grey8",                 "38;2;20;20;20"     },
  { "fg-gray9",                 "38;2;23;23;23"     },
  { "fg-grey9",                 "38;2;23;23;23"     },
  { "fg-gray10",                "38;2;26;26;26"     },
  { "fg-grey10",                "38;2;26;26;26"     },
  { "fg-gray11",                "38;2;28;28;28"     },
  { "fg-grey11",                "38;2;28;28;28"     },
  { "fg-gray12",                "38;2;31;31;31"     },
  { "fg-grey12",                "38;2;31;31;31"     },
  { "fg-gray13",                "38;2;33;33;33"     },
  { "fg-grey13",                "38;2;33;33;33"     },
  { "fg-gray14",                "38;2;36;36;36"     },
  { "fg-grey14",                "38;2;36;36;36"     },
  { "fg-gray15",                "38;2;38;38;38"     },
  { "fg-grey15",                "38;2;38;38;38"     },
  { "fg-gray16",                "38;2;41;41;41"     },
  { "fg-grey16",                "38;2;41;41;41"     },
  { "fg-gray17",                "38;2;43;43;43"     },
  { "fg-grey17",                "38;2;43;43;43"     },
  { "fg-gray18",                "38;2;46;46;46"     },
  { "fg-grey18",                "38;2;46;46;46"     },
  { "fg-gray19",                "38;2;48;48;48"     },
  { "fg-grey19",                "38;2;48;48;48"     },
  { "fg-gray20",                "38;2;51;51;51"     },
  { "fg-grey20",                "38;2;51;51;51"     },
  { "fg-gray21",                "38;2;54;54;54"     },
  { "fg-grey21",                "38;2;54;54;54"     },
  { "fg-gray22",                "38;2;56;56;56"     },
  { "fg-grey22",                "38;2;56;56;56"     },
  { "fg-gray23",                "38;2;59;59;59"     },
  { "fg-grey23",                "38;2;59;59;59"     },
  { "fg-gray24",                "38;2;61;61;61"     },
  { "fg-grey24",                "38;2;61;61;61"     },
  { "fg-gray25",                "38;2;64;64;64"     },
  { "fg-grey25",                "38;2;64;64;64"     },
  { "fg-gray26",                "38;2;66;66;66"     },
  { "fg-grey26",                "38;2;66;66;66"     },
  { "fg-gray27",                "38;2;69;69;69"     },
  { "fg-grey27",                "38;2;69;69;69"     },
  { "fg-gray28",                "38;2;71;71;71"     },
  { "fg-grey28",                "38;2;71;71;71"     },
  { "fg-gray29",                "38;2;74;74;74"     },
  { "fg-grey29",                "38;2;74;74;74"     },
  { "fg-gray30",                "38;2;77;77;77"     },
  { "fg-grey30",                "38;2;77;77;77"     },
  { "fg-gray31",                "38;2;79;79;79"     },
  { "fg-grey31",                "38;2;79;79;79"     },
  { "fg-gray32",                "38;2;82;82;82"     },
  { "fg-grey32",                "38;2;82;82;82"     },
  { "fg-gray33",                "38;2;84;84;84"     },
  { "fg-grey33",                "38;2;84;84;84"     },
  { "fg-gray34",                "38;2;87;87;87"     },
  { "fg-grey34",                "38;2;87;87;87"     },
  { "fg-gray35",                "38;2;89;89;89"     },
  { "fg-grey35",                "38;2;89;89;89"     },
  { "fg-gray36",                "38;2;92;92;92"     },
  { "fg-grey36",                "38;2;92;92;92"     },
  { "fg-gray37",                "38;2;94;94;94"     },
  { "fg-grey37",                "38;2;94;94;94"     },
  { "fg-gray38",                "38;2;97;97;97"     },
  { "fg-grey38",                "38;2;97;97;97"     },
  { "fg-gray39",                "38;2;99;99;99"     },
  { "fg-grey39",                "38;2;99;99;99"     },
  { "fg-gray40",                "38;2;102;102;102"  },
  { "fg-grey40",                "38;2;102;102;102"  },
  { "fg-gray41",                "38;2;105;105;105"  },
  { "fg-grey41",                "38;2;105;105;105"  },
  { "fg-gray42",                "38;2;107;107;107"  },
  { "fg-grey42",                "38;2;107;107;107"  },
  { "fg-gray43",                "38;2;110;110;110"  },
  { "fg-grey43",                "38;2;110;110;110"  },
  { "fg-gray44",                "38;2;112;112;112"  },
  { "fg-grey44",                "38;2;112;112;112"  },
  { "fg-gray45",                "38;2;115;115;115"  },
  { "fg-grey45",                "38;2;115;115;115"  },
  { "fg-gray46",                "38;2;117;117;117"  },
  { "fg-grey46",                "38;2;117;117;117"  },
  { "fg-gray47",                "38;2;120;120;120"  },
  { "fg-grey47",                "38;2;120;120;120"  },
  { "fg-gray48",                "38;2;122;122;122"  },
  { "fg-grey48",                "38;2;122;122;122"  },
  { "fg-gray49",                "38;2;125;125;125"  },
  { "fg-grey49",                "38;2;125;125;125"  },
  { "fg-gray50",                "38;2;127;127;127"  },
  { "fg-grey50",                "38;2;127;127;127"  },
  { "fg-gray51",                "38;2;130;130;130"  },
  { "fg-grey51",                "38;2;130;130;130"  },
  { "fg-gray52",                "38;2;133;133;133"  },
  { "fg-grey52",                "38;2;133;133;133"  },
  { "fg-gray53",                "38;2;135;135;135"  },
  { "fg-grey53",                "38;2;135;135;135"  },
  { "fg-gray54",                "38;2;138;138;138"  },
  { "fg-grey54",                "38;2;138;138;138"  },
  { "fg-gray55",                "38;2;140;140;140"  },
  { "fg-grey55",                "38;2;140;140;140"  },
  { "fg-gray56",                "38;2;143;143;143"  },
  { "fg-grey56",                "38;2;143;143;143"  },
  { "fg-gray57",                "38;2;145;145;145"  },
  { "fg-grey57",                "38;2;145;145;145"  },
  { "fg-gray58",                "38;2;148;148;148"  },
  { "fg-grey58",                "38;2;148;148;148"  },
  { "fg-gray59",                "38;2;150;150;150"  },
  { "fg-grey59",                "38;2;150;150;150"  },
  { "fg-gray60",                "38;2;153;153;153"  },
  { "fg-grey60",                "38;2;153;153;153"  },
  { "fg-gray61",                "38;2;156;156;156"  },
  { "fg-grey61",                "38;2;156;156;156"  },
  { "fg-gray62",                "38;2;158;158;158"  },
  { "fg-grey62",                "38;2;158;158;158"  },
  { "fg-gray63",                "38;2;161;161;161"  },
  { "fg-grey63",                "38;2;161;161;161"  },
  { "fg-gray64",                "38;2;163;163;163"  },
  { "fg-grey64",                "38;2;163;163;163"  },
  { "fg-gray65",                "38;2;166;166;166"  },
  { "fg-grey65",                "38;2;166;166;166"  },
  { "fg-gray66",                "38;2;168;168;168"  },
  { "fg-grey66",                "38;2;168;168;168"  },
  { "fg-gray67",                "38;2;171;171;171"  },
  { "fg-grey67",                "38;2;171;171;171"  },
  { "fg-gray68",                "38;2;173;173;173"  },
  { "fg-grey68",                "38;2;173;173;173"  },
  { "fg-gray69",                "38;2;176;176;176"  },
  { "fg-grey69",                "38;2;176;176;176"  },
  { "fg-gray70",                "38;2;179;179;179"  },
  { "fg-grey70",                "38;2;179;179;179"  },
  { "fg-gray71",                "38;2;181;181;181"  },
  { "fg-grey71",                "38;2;181;181;181"  },
  { "fg-gray72",                "38;2;184;184;184"  },
  { "fg-grey72",                "38;2;184;184;184"  },
  { "fg-gray73",                "38;2;186;186;186"  },
  { "fg-grey73",                "38;2;186;186;186"  },
  { "fg-gray74",                "38;2;189;189;189"  },
  { "fg-grey74",                "38;2;189;189;189"  },
  { "fg-gray75",                "38;2;191;191;191"  },
  { "fg-grey75",                "38;2;191;191;191"  },
  { "fg-gray76",                "38;2;194;194;194"  },
  { "fg-grey76",                "38;2;194;194;194"  },
  { "fg-gray77",                "38;2;196;196;196"  },
  { "fg-grey77",                "38;2;196;196;196"  },
  { "fg-gray78",                "38;2;199;199;199"  },
  { "fg-grey78",                "38;2;199;199;199"  },
  { "fg-gray79",                "38;2;201;201;201"  },
  { "fg-grey79",                "38;2;201;201;201"  },
  { "fg-gray80",                "38;2;204;204;204"  },
  { "fg-grey80",                "38;2;204;204;204"  },
  { "fg-gray81",                "38;2;207;207;207"  },
  { "fg-grey81",                "38;2;207;207;207"  },
  { "fg-gray82",                "38;2;209;209;209"  },
  { "fg-grey82",                "38;2;209;209;209"  },
  { "fg-gray83",                "38;2;212;212;212"  },
  { "fg-grey83",                "38;2;212;212;212"  },
  { "fg-gray84",                "38;2;214;214;214"  },
  { "fg-grey84",                "38;2;214;214;214"  },
  { "fg-gray85",                "38;2;217;217;217"  },
  { "fg-grey85",                "38;2;217;217;217"  },
  { "fg-gray86",                "38;2;219;219;219"  },
  { "fg-grey86",                "38;2;219;219;219"  },
  { "fg-gray87",                "38;2;222;222;222"  },
  { "fg-grey87",                "38;2;222;222;222"  },
  { "fg-gray88",                "38;2;224;224;224"  },
  { "fg-grey88",                "38;2;224;224;224"  },
  { "fg-gray89",                "38;2;227;227;227"  },
  { "fg-grey89",                "38;2;227;227;227"  },
  { "fg-gray90",                "38;2;229;229;229"  },
  { "fg-grey90",                "38;2;229;229;229"  },
  { "fg-gray91",                "38;2;232;232;232"  },
  { "fg-grey91",                "38;2;232;232;232"  },
  { "fg-gray92",                "38;2;235;235;235"  },
  { "fg-grey92",                "38;2;235;235;235"  },
  { "fg-gray93",                "38;2;237;237;237"  },
  { "fg-grey93",                "38;2;237;237;237"  },
  { "fg-gray94",                "38;2;240;240;240"  },
  { "fg-grey94",                "38;2;240;240;240"  },
  { "fg-gray95",                "38;2;242;242;242"  },
  { "fg-grey95",                "38;2;242;242;242"  },
  { "fg-gray96",                "38;2;245;245;245"  },
  { "fg-grey96",                "38;2;245;245;245"  },
  { "fg-gray97",                "38;2;247;247;247"  },
  { "fg-grey97",                "38;2;247;247;247"  },
  { "fg-gray98",                "38;2;250;250;250"  },
  { "fg-grey98",                "38;2;250;250;250"  },
  { "fg-gray99",                "38;2;252;252;252"  },
  { "fg-grey99",                "38;2;252;252;252"  },
  { "fg-gray100",               "38;2;255;255;255"  },
  { "fg-grey100",               "38;2;255;255;255"  },
  { "fg-darkgrey",              "38;2;169;169;169"  },
  { "fg-darkgray",              "38;2;169;169;169"  },
  { "fg-darkblue",              "38;2;0;0;139"      },
  { "fg-darkcyan",              "38;2;0;139;139"    },
  { "fg-darkmagenta",           "38;2;139;0;139"    },
  { "fg-darkred",               "38;2;139;0;0"      },
  { "fg-lightgreen",            "38;2;144;238;144"  },

  // rgb colours, background
  { "bg-snow",                  "48;2;255;250;250"  },
  { "bg-ghostwhite",            "48;2;248;248;255"  },
  { "bg-whitesmoke",            "48;2;245;245;245"  },
  { "bg-gainsboro",             "48;2;220;220;220"  },
  { "bg-floralwhite",           "48;2;255;250;240"  },
  { "bg-oldlace",               "48;2;253;245;230"  },
  { "bg-linen",                 "48;2;250;240;230"  },
  { "bg-antiquewhite",          "48;2;250;235;215"  },
  { "bg-papayawhip",            "48;2;255;239;213"  },
  { "bg-blanchedalmond",        "48;2;255;235;205"  },
  { "bg-bisque",                "48;2;255;228;196"  },
  { "bg-peachpuff",             "48;2;255;218;185"  },
  { "bg-navajowhite",           "48;2;255;222;173"  },
  { "bg-moccasin",              "48;2;255;228;181"  },
  { "bg-cornsilk",              "48;2;255;248;220"  },
  { "bg-ivory",                 "48;2;255;255;240"  },
  { "bg-lemonchiffon",          "48;2;255;250;205"  },
  { "bg-seashell",              "48;2;255;245;238"  },
  { "bg-honeydew",              "48;2;240;255;240"  },
  { "bg-mintcream",             "48;2;245;255;250"  },
  { "bg-azure",                 "48;2;240;255;255"  },
  { "bg-aliceblue",             "48;2;240;248;255"  },
  { "bg-lavender",              "48;2;230;230;250"  },
  { "bg-lavenderblush",         "48;2;255;240;245"  },
  { "bg-mistyrose",             "48;2;255;228;225"  },
  { "bg-white",                 "48;2;255;255;255"  },
  { "bg-black",                 "48;2;0;0;0"        },
  { "bg-darkslategray",         "48;2;47;79;79"     },
  { "bg-darkslategrey",         "48;2;47;79;79"     },
  { "bg-dimgray",               "48;2;105;105;105"  },
  { "bg-dimgrey",               "48;2;105;105;105"  },
  { "bg-slategray",             "48;2;112;128;144"  },
  { "bg-slategrey",             "48;2;112;128;144"  },
  { "bg-lightslategray",        "48;2;119;136;153"  },
  { "bg-lightslategrey",        "48;2;119;136;153"  },
  { "bg-gray",                  "48;2;190;190;190"  },
  { "bg-grey",                  "48;2;190;190;190"  },
  { "bg-lightgrey",             "48;2;211;211;211"  },
  { "bg-lightgray",             "48;2;211;211;211"  },
  { "bg-midnightblue",          "48;2;25;25;112"    },
  { "bg-navy",                  "48;2;0;0;128"      },
  { "bg-navyblue",              "48;2;0;0;128"      },
  { "bg-cornflowerblue",        "48;2;100;149;237"  },
  { "bg-darkslateblue",         "48;2;72;61;139"    },
  { "bg-slateblue",             "48;2;106;90;205"   },
  { "bg-mediumslateblue",       "48;2;123;104;238"  },
  { "bg-lightslateblue",        "48;2;132;112;255"  },
  { "bg-mediumblue",            "48;2;0;0;205"      },
  { "bg-royalblue",             "48;2;65;105;225"   },
  { "bg-blue",                  "48;2;0;0;255"      },
  { "bg-dodgerblue",            "48;2;30;144;255"   },
  { "bg-deepskyblue",           "48;2;0;191;255"    },
  { "bg-skyblue",               "48;2;135;206;235"  },
  { "bg-lightskyblue",          "48;2;135;206;250"  },
  { "bg-steelblue",             "48;2;70;130;180"   },
  { "bg-lightsteelblue",        "48;2;176;196;222"  },
  { "bg-lightblue",             "48;2;173;216;230"  },
  { "bg-powderblue",            "48;2;176;224;230"  },
  { "bg-paleturquoise",         "48;2;175;238;238"  },
  { "bg-darkturquoise",         "48;2;0;206;209"    },
  { "bg-mediumturquoise",       "48;2;72;209;204"   },
  { "bg-turquoise",             "48;2;64;224;208"   },
  { "bg-cyan",                  "48;2;0;255;255"    },
  { "bg-lightcyan",             "48;2;224;255;255"  },
  { "bg-cadetblue",             "48;2;95;158;160"   },
  { "bg-mediumaquamarine",      "48;2;102;205;170"  },
  { "bg-aquamarine",            "48;2;127;255;212"  },
  { "bg-darkgreen",             "48;2;0;100;0"      },
  { "bg-darkolivegreen",        "48;2;85;107;47"    },
  { "bg-darkseagreen",          "48;2;143;188;143"  },
  { "bg-seagreen",              "48;2;46;139;87"    },
  { "bg-mediumseagreen",        "48;2;60;179;113"   },
  { "bg-lightseagreen",         "48;2;32;178;170"   },
  { "bg-palegreen",             "48;2;152;251;152"  },
  { "bg-springgreen",           "48;2;0;255;127"    },
  { "bg-lawngreen",             "48;2;124;252;0"    },
  { "bg-green",                 "48;2;0;255;0"      },
  { "bg-chartreuse",            "48;2;127;255;0"    },
  { "bg-mediumspringgreen",     "48;2;0;250;154"    },
  { "bg-greenyellow",           "48;2;173;255;47"   },
  { "bg-limegreen",             "48;2;50;205;50"    },
  { "bg-yellowgreen",           "48;2;154;205;50"   },
  { "bg-forestgreen",           "48;2;34;139;34"    },
  { "bg-olivedrab",             "48;2;107;142;35"   },
  { "bg-darkkhaki",             "48;2;189;183;107"  },
  { "bg-khaki",                 "48;2;240;230;140"  },
  { "bg-palegoldenrod",         "48;2;238;232;170"  },
  { "bg-lightgoldenrodyellow",  "48;2;250;250;210"  },
  { "bg-lightyellow",           "48;2;255;255;224"  },
  { "bg-yellow",                "48;2;255;255;0"    },
  { "bg-gold",                  "48;2;255;215;0"    },
  { "bg-lightgoldenrod",        "48;2;238;221;130"  },
  { "bg-goldenrod",             "48;2;218;165;32"   },
  { "bg-darkgoldenrod",         "48;2;184;134;11"   },
  { "bg-rosybrown",             "48;2;188;143;143"  },
  { "bg-indianred",             "48;2;205;92;92"    },
  { "bg-saddlebrown",           "48;2;139;69;19"    },
  { "bg-sienna",                "48;2;160;82;45"    },
  { "bg-peru",                  "48;2;205;133;63"   },
  { "bg-burlywood",             "48;2;222;184;135"  },
  { "bg-beige",                 "48;2;245;245;220"  },
  { "bg-wheat",                 "48;2;245;222;179"  },
  { "bg-sandybrown",            "48;2;244;164;96"   },
  { "bg-tan",                   "48;2;210;180;140"  },
  { "bg-chocolate",             "48;2;210;105;30"   },
  { "bg-firebrick",             "48;2;178;34;34"    },
  { "bg-brown",                 "48;2;165;42;42"    },
  { "bg-darksalmon",            "48;2;233;150;122"  },
  { "bg-salmon",                "48;2;250;128;114"  },
  { "bg-lightsalmon",           "48;2;255;160;122"  },
  { "bg-orange",                "48;2;255;165;0"    },
  { "bg-darkorange",            "48;2;255;140;0"    },
  { "bg-coral",                 "48;2;255;127;80"   },
  { "bg-lightcoral",            "48;2;240;128;128"  },
  { "bg-tomato",                "48;2;255;99;71"    },
  { "bg-orangered",             "48;2;255;69;0"     },
  { "bg-red",                   "48;2;255;0;0"      },
  { "bg-hotpink",               "48;2;255;105;180"  },
  { "bg-deeppink",              "48;2;255;20;147"   },
  { "bg-pink",                  "48;2;255;192;203"  },
  { "bg-lightpink",             "48;2;255;182;193"  },
  { "bg-palevioletred",         "48;2;219;112;147"  },
  { "bg-maroon",                "48;2;176;48;96"    },
  { "bg-mediumvioletred",       "48;2;199;21;133"   },
  { "bg-violetred",             "48;2;208;32;144"   },
  { "bg-magenta",               "48;2;255;0;255"    },
  { "bg-violet",                "48;2;238;130;238"  },
  { "bg-plum",                  "48;2;221;160;221"  },
  { "bg-orchid",                "48;2;218;112;214"  },
  { "bg-mediumorchid",          "48;2;186;85;211"   },
  { "bg-darkorchid",            "48;2;153;50;204"   },
  { "bg-darkviolet",            "48;2;148;0;211"    },
  { "bg-blueviolet",            "48;2;138;43;226"   },
  { "bg-purple",                "48;2;160;32;240"   },
  { "bg-mediumpurple",          "48;2;147;112;219"  },
  { "bg-thistle",               "48;2;216;191;216"  },
  { "bg-snow1",                 "48;2;255;250;250"  },
  { "bg-snow2",                 "48;2;238;233;233"  },
  { "bg-snow3",                 "48;2;205;201;201"  },
  { "bg-snow4",                 "48;2;139;137;137"  },
  { "bg-seashell1",             "48;2;255;245;238"  },
  { "bg-seashell2",             "48;2;238;229;222"  },
  { "bg-seashell3",             "48;2;205;197;191"  },
  { "bg-seashell4",             "48;2;139;134;130"  },
  { "bg-antiquewhite1",         "48;2;255;239;219"  },
  { "bg-antiquewhite2",         "48;2;238;223;204"  },
  { "bg-antiquewhite3",         "48;2;205;192;176"  },
  { "bg-antiquewhite4",         "48;2;139;131;120"  },
  { "bg-bisque1",               "48;2;255;228;196"  },
  { "bg-bisque2",               "48;2;238;213;183"  },
  { "bg-bisque3",               "48;2;205;183;158"  },
  { "bg-bisque4",               "48;2;139;125;107"  },
  { "bg-peachpuff1",            "48;2;255;218;185"  },
  { "bg-peachpuff2",            "48;2;238;203;173"  },
  { "bg-peachpuff3",            "48;2;205;175;149"  },
  { "bg-peachpuff4",            "48;2;139;119;101"  },
  { "bg-navajowhite1",          "48;2;255;222;173"  },
  { "bg-navajowhite2",          "48;2;238;207;161"  },
  { "bg-navajowhite3",          "48;2;205;179;139"  },
  { "bg-navajowhite4",          "48;2;139;121;94"   },
  { "bg-lemonchiffon1",         "48;2;255;250;205"  },
  { "bg-lemonchiffon2",         "48;2;238;233;191"  },
  { "bg-lemonchiffon3",         "48;2;205;201;165"  },
  { "bg-lemonchiffon4",         "48;2;139;137;112"  },
  { "bg-cornsilk1",             "48;2;255;248;220"  },
  { "bg-cornsilk2",             "48;2;238;232;205"  },
  { "bg-cornsilk3",             "48;2;205;200;177"  },
  { "bg-cornsilk4",             "48;2;139;136;120"  },
  { "bg-ivory1",                "48;2;255;255;240"  },
  { "bg-ivory2",                "48;2;238;238;224"  },
  { "bg-ivory3",                "48;2;205;205;193"  },
  { "bg-ivory4",                "48;2;139;139;131"  },
  { "bg-honeydew1",             "48;2;240;255;240"  },
  { "bg-honeydew2",             "48;2;224;238;224"  },
  { "bg-honeydew3",             "48;2;193;205;193"  },
  { "bg-honeydew4",             "48;2;131;139;131"  },
  { "bg-lavenderblush1",        "48;2;255;240;245"  },
  { "bg-lavenderblush2",        "48;2;238;224;229"  },
  { "bg-lavenderblush3",        "48;2;205;193;197"  },
  { "bg-lavenderblush4",        "48;2;139;131;134"  },
  { "bg-mistyrose1",            "48;2;255;228;225"  },
  { "bg-mistyrose2",            "48;2;238;213;210"  },
  { "bg-mistyrose3",            "48;2;205;183;181"  },
  { "bg-mistyrose4",            "48;2;139;125;123"  },
  { "bg-azure1",                "48;2;240;255;255"  },
  { "bg-azure2",                "48;2;224;238;238"  },
  { "bg-azure3",                "48;2;193;205;205"  },
  { "bg-azure4",                "48;2;131;139;139"  },
  { "bg-slateblue1",            "48;2;131;111;255"  },
  { "bg-slateblue2",            "48;2;122;103;238"  },
  { "bg-slateblue3",            "48;2;105;89;205"   },
  { "bg-slateblue4",            "48;2;71;60;139"    },
  { "bg-royalblue1",            "48;2;72;118;255"   },
  { "bg-royalblue2",            "48;2;67;110;238"   },
  { "bg-royalblue3",            "48;2;58;95;205"    },
  { "bg-royalblue4",            "48;2;39;64;139"    },
  { "bg-blue1",                 "48;2;0;0;255"      },
  { "bg-blue2",                 "48;2;0;0;238"      },
  { "bg-blue3",                 "48;2;0;0;205"      },
  { "bg-blue4",                 "48;2;0;0;139"      },
  { "bg-dodgerblue1",           "48;2;30;144;255"   },
  { "bg-dodgerblue2",           "48;2;28;134;238"   },
  { "bg-dodgerblue3",           "48;2;24;116;205"   },
  { "bg-dodgerblue4",           "48;2;16;78;139"    },
  { "bg-steelblue1",            "48;2;99;184;255"   },
  { "bg-steelblue2",            "48;2;92;172;238"   },
  { "bg-steelblue3",            "48;2;79;148;205"   },
  { "bg-steelblue4",            "48;2;54;100;139"   },
  { "bg-deepskyblue1",          "48;2;0;191;255"    },
  { "bg-deepskyblue2",          "48;2;0;178;238"    },
  { "bg-deepskyblue3",          "48;2;0;154;205"    },
  { "bg-deepskyblue4",          "48;2;0;104;139"    },
  { "bg-skyblue1",              "48;2;135;206;255"  },
  { "bg-skyblue2",              "48;2;126;192;238"  },
  { "bg-skyblue3",              "48;2;108;166;205"  },
  { "bg-skyblue4",              "48;2;74;112;139"   },
  { "bg-lightskyblue1",         "48;2;176;226;255"  },
  { "bg-lightskyblue2",         "48;2;164;211;238"  },
  { "bg-lightskyblue3",         "48;2;141;182;205"  },
  { "bg-lightskyblue4",         "48;2;96;123;139"   },
  { "bg-slategray1",            "48;2;198;226;255"  },
  { "bg-slategray2",            "48;2;185;211;238"  },
  { "bg-slategray3",            "48;2;159;182;205"  },
  { "bg-slategray4",            "48;2;108;123;139"  },
  { "bg-lightsteelblue1",       "48;2;202;225;255"  },
  { "bg-lightsteelblue2",       "48;2;188;210;238"  },
  { "bg-lightsteelblue3",       "48;2;162;181;205"  },
  { "bg-lightsteelblue4",       "48;2;110;123;139"  },
  { "bg-lightblue1",            "48;2;191;239;255"  },
  { "bg-lightblue2",            "48;2;178;223;238"  },
  { "bg-lightblue3",            "48;2;154;192;205"  },
  { "bg-lightblue4",            "48;2;104;131;139"  },
  { "bg-lightcyan1",            "48;2;224;255;255"  },
  { "bg-lightcyan2",            "48;2;209;238;238"  },
  { "bg-lightcyan3",            "48;2;180;205;205"  },
  { "bg-lightcyan4",            "48;2;122;139;139"  },
  { "bg-paleturquoise1",        "48;2;187;255;255"  },
  { "bg-paleturquoise2",        "48;2;174;238;238"  },
  { "bg-paleturquoise3",        "48;2;150;205;205"  },
  { "bg-paleturquoise4",        "48;2;102;139;139"  },
  { "bg-cadetblue1",            "48;2;152;245;255"  },
  { "bg-cadetblue2",            "48;2;142;229;238"  },
  { "bg-cadetblue3",            "48;2;122;197;205"  },
  { "bg-cadetblue4",            "48;2;83;134;139"   },
  { "bg-turquoise1",            "48;2;0;245;255"    },
  { "bg-turquoise2",            "48;2;0;229;238"    },
  { "bg-turquoise3",            "48;2;0;197;205"    },
  { "bg-turquoise4",            "48;2;0;134;139"    },
  { "bg-cyan1",                 "48;2;0;255;255"    },
  { "bg-cyan2",                 "48;2;0;238;238"    },
  { "bg-cyan3",                 "48;2;0;205;205"    },
  { "bg-cyan4",                 "48;2;0;139;139"    },
  { "bg-darkslategray1",        "48;2;151;255;255"  },
  { "bg-darkslategray2",        "48;2;141;238;238"  },
  { "bg-darkslategray3",        "48;2;121;205;205"  },
  { "bg-darkslategray4",        "48;2;82;139;139"   },
  { "bg-aquamarine1",           "48;2;127;255;212"  },
  { "bg-aquamarine2",           "48;2;118;238;198"  },
  { "bg-aquamarine3",           "48;2;102;205;170"  },
  { "bg-aquamarine4",           "48;2;69;139;116"   },
  { "bg-darkseagreen1",         "48;2;193;255;193"  },
  { "bg-darkseagreen2",         "48;2;180;238;180"  },
  { "bg-darkseagreen3",         "48;2;155;205;155"  },
  { "bg-darkseagreen4",         "48;2;105;139;105"  },
  { "bg-seagreen1",             "48;2;84;255;159"   },
  { "bg-seagreen2",             "48;2;78;238;148"   },
  { "bg-seagreen3",             "48;2;67;205;128"   },
  { "bg-seagreen4",             "48;2;46;139;87"    },
  { "bg-palegreen1",            "48;2;154;255;154"  },
  { "bg-palegreen2",            "48;2;144;238;144"  },
  { "bg-palegreen3",            "48;2;124;205;124"  },
  { "bg-palegreen4",            "48;2;84;139;84"    },
  { "bg-springgreen1",          "48;2;0;255;127"    },
  { "bg-springgreen2",          "48;2;0;238;118"    },
  { "bg-springgreen3",          "48;2;0;205;102"    },
  { "bg-springgreen4",          "48;2;0;139;69"     },
  { "bg-green1",                "48;2;0;255;0"      },
  { "bg-green2",                "48;2;0;238;0"      },
  { "bg-green3",                "48;2;0;205;0"      },
  { "bg-green4",                "48;2;0;139;0"      },
  { "bg-chartreuse1",           "48;2;127;255;0"    },
  { "bg-chartreuse2",           "48;2;118;238;0"    },
  { "bg-chartreuse3",           "48;2;102;205;0"    },
  { "bg-chartreuse4",           "48;2;69;139;0"     },
  { "bg-olivedrab1",            "48;2;192;255;62"   },
  { "bg-olivedrab2",            "48;2;179;238;58"   },
  { "bg-olivedrab3",            "48;2;154;205;50"   },
  { "bg-olivedrab4",            "48;2;105;139;34"   },
  { "bg-darkolivegreen1",       "48;2;202;255;112"  },
  { "bg-darkolivegreen2",       "48;2;188;238;104"  },
  { "bg-darkolivegreen3",       "48;2;162;205;90"   },
  { "bg-darkolivegreen4",       "48;2;110;139;61"   },
  { "bg-khaki1",                "48;2;255;246;143"  },
  { "bg-khaki2",                "48;2;238;230;133"  },
  { "bg-khaki3",                "48;2;205;198;115"  },
  { "bg-khaki4",                "48;2;139;134;78"   },
  { "bg-lightgoldenrod1",       "48;2;255;236;139"  },
  { "bg-lightgoldenrod2",       "48;2;238;220;130"  },
  { "bg-lightgoldenrod3",       "48;2;205;190;112"  },
  { "bg-lightgoldenrod4",       "48;2;139;129;76"   },
  { "bg-lightyellow1",          "48;2;255;255;224"  },
  { "bg-lightyellow2",          "48;2;238;238;209"  },
  { "bg-lightyellow3",          "48;2;205;205;180"  },
  { "bg-lightyellow4",          "48;2;139;139;122"  },
  { "bg-yellow1",               "48;2;255;255;0"    },
  { "bg-yellow2",               "48;2;238;238;0"    },
  { "bg-yellow3",               "48;2;205;205;0"    },
  { "bg-yellow4",               "48;2;139;139;0"    },
  { "bg-gold1",                 "48;2;255;215;0"    },
  { "bg-gold2",                 "48;2;238;201;0"    },
  { "bg-gold3",                 "48;2;205;173;0"    },
  { "bg-gold4",                 "48;2;139;117;0"    },
  { "bg-goldenrod1",            "48;2;255;193;37"   },
  { "bg-goldenrod2",            "48;2;238;180;34"   },
  { "bg-goldenrod3",            "48;2;205;155;29"   },
  { "bg-goldenrod4",            "48;2;139;105;20"   },
  { "bg-darkgoldenrod1",        "48;2;255;185;15"   },
  { "bg-darkgoldenrod2",        "48;2;238;173;14"   },
  { "bg-darkgoldenrod3",        "48;2;205;149;12"   },
  { "bg-darkgoldenrod4",        "48;2;139;101;8"    },
  { "bg-rosybrown1",            "48;2;255;193;193"  },
  { "bg-rosybrown2",            "48;2;238;180;180"  },
  { "bg-rosybrown3",            "48;2;205;155;155"  },
  { "bg-rosybrown4",            "48;2;139;105;105"  },
  { "bg-indianred1",            "48;2;255;106;106"  },
  { "bg-indianred2",            "48;2;238;99;99"    },
  { "bg-indianred3",            "48;2;205;85;85"    },
  { "bg-indianred4",            "48;2;139;58;58"    },
  { "bg-sienna1",               "48;2;255;130;71"   },
  { "bg-sienna2",               "48;2;238;121;66"   },
  { "bg-sienna3",               "48;2;205;104;57"   },
  { "bg-sienna4",               "48;2;139;71;38"    },
  { "bg-burlywood1",            "48;2;255;211;155"  },
  { "bg-burlywood2",            "48;2;238;197;145"  },
  { "bg-burlywood3",            "48;2;205;170;125"  },
  { "bg-burlywood4",            "48;2;139;115;85"   },
  { "bg-wheat1",                "48;2;255;231;186"  },
  { "bg-wheat2",                "48;2;238;216;174"  },
  { "bg-wheat3",                "48;2;205;186;150"  },
  { "bg-wheat4",                "48;2;139;126;102"  },
  { "bg-tan1",                  "48;2;255;165;79"   },
  { "bg-tan2",                  "48;2;238;154;73"   },
  { "bg-tan3",                  "48;2;205;133;63"   },
  { "bg-tan4",                  "48;2;139;90;43"    },
  { "bg-chocolate1",            "48;2;255;127;36"   },
  { "bg-chocolate2",            "48;2;238;118;33"   },
  { "bg-chocolate3",            "48;2;205;102;29"   },
  { "bg-chocolate4",            "48;2;139;69;19"    },
  { "bg-firebrick1",            "48;2;255;48;48"    },
  { "bg-firebrick2",            "48;2;238;44;44"    },
  { "bg-firebrick3",            "48;2;205;38;38"    },
  { "bg-firebrick4",            "48;2;139;26;26"    },
  { "bg-brown1",                "48;2;255;64;64"    },
  { "bg-brown2",                "48;2;238;59;59"    },
  { "bg-brown3",                "48;2;205;51;51"    },
  { "bg-brown4",                "48;2;139;35;35"    },
  { "bg-salmon1",               "48;2;255;140;105"  },
  { "bg-salmon2",               "48;2;238;130;98"   },
  { "bg-salmon3",               "48;2;205;112;84"   },
  { "bg-salmon4",               "48;2;139;76;57"    },
  { "bg-lightsalmon1",          "48;2;255;160;122"  },
  { "bg-lightsalmon2",          "48;2;238;149;114"  },
  { "bg-lightsalmon3",          "48;2;205;129;98"   },
  { "bg-lightsalmon4",          "48;2;139;87;66"    },
  { "bg-orange1",               "48;2;255;165;0"    },
  { "bg-orange2",               "48;2;238;154;0"    },
  { "bg-orange3",               "48;2;205;133;0"    },
  { "bg-orange4",               "48;2;139;90;0"     },
  { "bg-darkorange1",           "48;2;255;127;0"    },
  { "bg-darkorange2",           "48;2;238;118;0"    },
  { "bg-darkorange3",           "48;2;205;102;0"    },
  { "bg-darkorange4",           "48;2;139;69;0"     },
  { "bg-coral1",                "48;2;255;114;86"   },
  { "bg-coral2",                "48;2;238;106;80"   },
  { "bg-coral3",                "48;2;205;91;69"    },
  { "bg-coral4",                "48;2;139;62;47"    },
  { "bg-tomato1",               "48;2;255;99;71"    },
  { "bg-tomato2",               "48;2;238;92;66"    },
  { "bg-tomato3",               "48;2;205;79;57"    },
  { "bg-tomato4",               "48;2;139;54;38"    },
  { "bg-orangered1",            "48;2;255;69;0"     },
  { "bg-orangered2",            "48;2;238;64;0"     },
  { "bg-orangered3",            "48;2;205;55;0"     },
  { "bg-orangered4",            "48;2;139;37;0"     },
  { "bg-red1",                  "48;2;255;0;0"      },
  { "bg-red2",                  "48;2;238;0;0"      },
  { "bg-red3",                  "48;2;205;0;0"      },
  { "bg-red4",                  "48;2;139;0;0"      },
  { "bg-debianred",             "48;2;215;7;81"     },
  { "bg-deeppink1",             "48;2;255;20;147"   },
  { "bg-deeppink2",             "48;2;238;18;137"   },
  { "bg-deeppink3",             "48;2;205;16;118"   },
  { "bg-deeppink4",             "48;2;139;10;80"    },
  { "bg-hotpink1",              "48;2;255;110;180"  },
  { "bg-hotpink2",              "48;2;238;106;167"  },
  { "bg-hotpink3",              "48;2;205;96;144"   },
  { "bg-hotpink4",              "48;2;139;58;98"    },
  { "bg-pink1",                 "48;2;255;181;197"  },
  { "bg-pink2",                 "48;2;238;169;184"  },
  { "bg-pink3",                 "48;2;205;145;158"  },
  { "bg-pink4",                 "48;2;139;99;108"   },
  { "bg-lightpink1",            "48;2;255;174;185"  },
  { "bg-lightpink2",            "48;2;238;162;173"  },
  { "bg-lightpink3",            "48;2;205;140;149"  },
  { "bg-lightpink4",            "48;2;139;95;101"   },
  { "bg-palevioletred1",        "48;2;255;130;171"  },
  { "bg-palevioletred2",        "48;2;238;121;159"  },
  { "bg-palevioletred3",        "48;2;205;104;137"  },
  { "bg-palevioletred4",        "48;2;139;71;93"    },
  { "bg-maroon1",               "48;2;255;52;179"   },
  { "bg-maroon2",               "48;2;238;48;167"   },
  { "bg-maroon3",               "48;2;205;41;144"   },
  { "bg-maroon4",               "48;2;139;28;98"    },
  { "bg-violetred1",            "48;2;255;62;150"   },
  { "bg-violetred2",            "48;2;238;58;140"   },
  { "bg-violetred3",            "48;2;205;50;120"   },
  { "bg-violetred4",            "48;2;139;34;82"    },
  { "bg-magenta1",              "48;2;255;0;255"    },
  { "bg-magenta2",              "48;2;238;0;238"    },
  { "bg-magenta3",              "48;2;205;0;205"    },
  { "bg-magenta4",              "48;2;139;0;139"    },
  { "bg-orchid1",               "48;2;255;131;250"  },
  { "bg-orchid2",               "48;2;238;122;233"  },
  { "bg-orchid3",               "48;2;205;105;201"  },
  { "bg-orchid4",               "48;2;139;71;137"   },
  { "bg-plum1",                 "48;2;255;187;255"  },
  { "bg-plum2",                 "48;2;238;174;238"  },
  { "bg-plum3",                 "48;2;205;150;205"  },
  { "bg-plum4",                 "48;2;139;102;139"  },
  { "bg-mediumorchid1",         "48;2;224;102;255"  },
  { "bg-mediumorchid2",         "48;2;209;95;238"   },
  { "bg-mediumorchid3",         "48;2;180;82;205"   },
  { "bg-mediumorchid4",         "48;2;122;55;139"   },
  { "bg-darkorchid1",           "48;2;191;62;255"   },
  { "bg-darkorchid2",           "48;2;178;58;238"   },
  { "bg-darkorchid3",           "48;2;154;50;205"   },
  { "bg-darkorchid4",           "48;2;104;34;139"   },
  { "bg-purple1",               "48;2;155;48;255"   },
  { "bg-purple2",               "48;2;145;44;238"   },
  { "bg-purple3",               "48;2;125;38;205"   },
  { "bg-purple4",               "48;2;85;26;139"    },
  { "bg-mediumpurple1",         "48;2;171;130;255"  },
  { "bg-mediumpurple2",         "48;2;159;121;238"  },
  { "bg-mediumpurple3",         "48;2;137;104;205"  },
  { "bg-mediumpurple4",         "48;2;93;71;139"    },
  { "bg-thistle1",              "48;2;255;225;255"  },
  { "bg-thistle2",              "48;2;238;210;238"  },
  { "bg-thistle3",              "48;2;205;181;205"  },
  { "bg-thistle4",              "48;2;139;123;139"  },
  { "bg-gray0",                 "48;2;0;0;0"        },
  { "bg-grey0",                 "48;2;0;0;0"        },
  { "bg-gray1",                 "48;2;3;3;3"        },
  { "bg-grey1",                 "48;2;3;3;3"        },
  { "bg-gray2",                 "48;2;5;5;5"        },
  { "bg-grey2",                 "48;2;5;5;5"        },
  { "bg-gray3",                 "48;2;8;8;8"        },
  { "bg-grey3",                 "48;2;8;8;8"        },
  { "bg-gray4",                 "48;2;10;10;10"     },
  { "bg-grey4",                 "48;2;10;10;10"     },
  { "bg-gray5",                 "48;2;13;13;13"     },
  { "bg-grey5",                 "48;2;13;13;13"     },
  { "bg-gray6",                 "48;2;15;15;15"     },
  { "bg-grey6",                 "48;2;15;15;15"     },
  { "bg-gray7",                 "48;2;18;18;18"     },
  { "bg-grey7",                 "48;2;18;18;18"     },
  { "bg-gray8",                 "48;2;20;20;20"     },
  { "bg-grey8",                 "48;2;20;20;20"     },
  { "bg-gray9",                 "48;2;23;23;23"     },
  { "bg-grey9",                 "48;2;23;23;23"     },
  { "bg-gray10",                "48;2;26;26;26"     },
  { "bg-grey10",                "48;2;26;26;26"     },
  { "bg-gray11",                "48;2;28;28;28"     },
  { "bg-grey11",                "48;2;28;28;28"     },
  { "bg-gray12",                "48;2;31;31;31"     },
  { "bg-grey12",                "48;2;31;31;31"     },
  { "bg-gray13",                "48;2;33;33;33"     },
  { "bg-grey13",                "48;2;33;33;33"     },
  { "bg-gray14",                "48;2;36;36;36"     },
  { "bg-grey14",                "48;2;36;36;36"     },
  { "bg-gray15",                "48;2;38;38;38"     },
  { "bg-grey15",                "48;2;38;38;38"     },
  { "bg-gray16",                "48;2;41;41;41"     },
  { "bg-grey16",                "48;2;41;41;41"     },
  { "bg-gray17",                "48;2;43;43;43"     },
  { "bg-grey17",                "48;2;43;43;43"     },
  { "bg-gray18",                "48;2;46;46;46"     },
  { "bg-grey18",                "48;2;46;46;46"     },
  { "bg-gray19",                "48;2;48;48;48"     },
  { "bg-grey19",                "48;2;48;48;48"     },
  { "bg-gray20",                "48;2;51;51;51"     },
  { "bg-grey20",                "48;2;51;51;51"     },
  { "bg-gray21",                "48;2;54;54;54"     },
  { "bg-grey21",                "48;2;54;54;54"     },
  { "bg-gray22",                "48;2;56;56;56"     },
  { "bg-grey22",                "48;2;56;56;56"     },
  { "bg-gray23",                "48;2;59;59;59"     },
  { "bg-grey23",                "48;2;59;59;59"     },
  { "bg-gray24",                "48;2;61;61;61"     },
  { "bg-grey24",                "48;2;61;61;61"     },
  { "bg-gray25",                "48;2;64;64;64"     },
  { "bg-grey25",                "48;2;64;64;64"     },
  { "bg-gray26",                "48;2;66;66;66"     },
  { "bg-grey26",                "48;2;66;66;66"     },
  { "bg-gray27",                "48;2;69;69;69"     },
  { "bg-grey27",                "48;2;69;69;69"     },
  { "bg-gray28",                "48;2;71;71;71"     },
  { "bg-grey28",                "48;2;71;71;71"     },
  { "bg-gray29",                "48;2;74;74;74"     },
  { "bg-grey29",                "48;2;74;74;74"     },
  { "bg-gray30",                "48;2;77;77;77"     },
  { "bg-grey30",                "48;2;77;77;77"     },
  { "bg-gray31",                "48;2;79;79;79"     },
  { "bg-grey31",                "48;2;79;79;79"     },
  { "bg-gray32",                "48;2;82;82;82"     },
  { "bg-grey32",                "48;2;82;82;82"     },
  { "bg-gray33",                "48;2;84;84;84"     },
  { "bg-grey33",                "48;2;84;84;84"     },
  { "bg-gray34",                "48;2;87;87;87"     },
  { "bg-grey34",                "48;2;87;87;87"     },
  { "bg-gray35",                "48;2;89;89;89"     },
  { "bg-grey35",                "48;2;89;89;89"     },
  { "bg-gray36",                "48;2;92;92;92"     },
  { "bg-grey36",                "48;2;92;92;92"     },
  { "bg-gray37",                "48;2;94;94;94"     },
  { "bg-grey37",                "48;2;94;94;94"     },
  { "bg-gray38",                "48;2;97;97;97"     },
  { "bg-grey38",                "48;2;97;97;97"     },
  { "bg-gray39",                "48;2;99;99;99"     },
  { "bg-grey39",                "48;2;99;99;99"     },
  { "bg-gray40",                "48;2;102;102;102"  },
  { "bg-grey40",                "48;2;102;102;102"  },
  { "bg-gray41",                "48;2;105;105;105"  },
  { "bg-grey41",                "48;2;105;105;105"  },
  { "bg-gray42",                "48;2;107;107;107"  },
  { "bg-grey42",                "48;2;107;107;107"  },
  { "bg-gray43",                "48;2;110;110;110"  },
  { "bg-grey43",                "48;2;110;110;110"  },
  { "bg-gray44",                "48;2;112;112;112"  },
  { "bg-grey44",                "48;2;112;112;112"  },
  { "bg-gray45",                "48;2;115;115;115"  },
  { "bg-grey45",                "48;2;115;115;115"  },
  { "bg-gray46",                "48;2;117;117;117"  },
  { "bg-grey46",                "48;2;117;117;117"  },
  { "bg-gray47",                "48;2;120;120;120"  },
  { "bg-grey47",                "48;2;120;120;120"  },
  { "bg-gray48",                "48;2;122;122;122"  },
  { "bg-grey48",                "48;2;122;122;122"  },
  { "bg-gray49",                "48;2;125;125;125"  },
  { "bg-grey49",                "48;2;125;125;125"  },
  { "bg-gray50",                "48;2;127;127;127"  },
  { "bg-grey50",                "48;2;127;127;127"  },
  { "bg-gray51",                "48;2;130;130;130"  },
  { "bg-grey51",                "48;2;130;130;130"  },
  { "bg-gray52",                "48;2;133;133;133"  },
  { "bg-grey52",                "48;2;133;133;133"  },
  { "bg-gray53",                "48;2;135;135;135"  },
  { "bg-grey53",                "48;2;135;135;135"  },
  { "bg-gray54",                "48;2;138;138;138"  },
  { "bg-grey54",                "48;2;138;138;138"  },
  { "bg-gray55",                "48;2;140;140;140"  },
  { "bg-grey55",                "48;2;140;140;140"  },
  { "bg-gray56",                "48;2;143;143;143"  },
  { "bg-grey56",                "48;2;143;143;143"  },
  { "bg-gray57",                "48;2;145;145;145"  },
  { "bg-grey57",                "48;2;145;145;145"  },
  { "bg-gray58",                "48;2;148;148;148"  },
  { "bg-grey58",                "48;2;148;148;148"  },
  { "bg-gray59",                "48;2;150;150;150"  },
  { "bg-grey59",                "48;2;150;150;150"  },
  { "bg-gray60",                "48;2;153;153;153"  },
  { "bg-grey60",                "48;2;153;153;153"  },
  { "bg-gray61",                "48;2;156;156;156"  },
  { "bg-grey61",                "48;2;156;156;156"  },
  { "bg-gray62",                "48;2;158;158;158"  },
  { "bg-grey62",                "48;2;158;158;158"  },
  { "bg-gray63",                "48;2;161;161;161"  },
  { "bg-grey63",                "48;2;161;161;161"  },
  { "bg-gray64",                "48;2;163;163;163"  },
  { "bg-grey64",                "48;2;163;163;163"  },
  { "bg-gray65",                "48;2;166;166;166"  },
  { "bg-grey65",                "48;2;166;166;166"  },
  { "bg-gray66",                "48;2;168;168;168"  },
  { "bg-grey66",                "48;2;168;168;168"  },
  { "bg-gray67",                "48;2;171;171;171"  },
  { "bg-grey67",                "48;2;171;171;171"  },
  { "bg-gray68",                "48;2;173;173;173"  },
  { "bg-grey68",                "48;2;173;173;173"  },
  { "bg-gray69",                "48;2;176;176;176"  },
  { "bg-grey69",                "48;2;176;176;176"  },
  { "bg-gray70",                "48;2;179;179;179"  },
  { "bg-grey70",                "48;2;179;179;179"  },
  { "bg-gray71",                "48;2;181;181;181"  },
  { "bg-grey71",                "48;2;181;181;181"  },
  { "bg-gray72",                "48;2;184;184;184"  },
  { "bg-grey72",                "48;2;184;184;184"  },
  { "bg-gray73",                "48;2;186;186;186"  },
  { "bg-grey73",                "48;2;186;186;186"  },
  { "bg-gray74",                "48;2;189;189;189"  },
  { "bg-grey74",                "48;2;189;189;189"  },
  { "bg-gray75",                "48;2;191;191;191"  },
  { "bg-grey75",                "48;2;191;191;191"  },
  { "bg-gray76",                "48;2;194;194;194"  },
  { "bg-grey76",                "48;2;194;194;194"  },
  { "bg-gray77",                "48;2;196;196;196"  },
  { "bg-grey77",                "48;2;196;196;196"  },
  { "bg-gray78",                "48;2;199;199;199"  },
  { "bg-grey78",                "48;2;199;199;199"  },
  { "bg-gray79",                "48;2;201;201;201"  },
  { "bg-grey79",                "48;2;201;201;201"  },
  { "bg-gray80",                "48;2;204;204;204"  },
  { "bg-grey80",                "48;2;204;204;204"  },
  { "bg-gray81",                "48;2;207;207;207"  },
  { "bg-grey81",                "48;2;207;207;207"  },
  { "bg-gray82",                "48;2;209;209;209"  },
  { "bg-grey82",                "48;2;209;209;209"  },
  { "bg-gray83",                "48;2;212;212;212"  },
  { "bg-grey83",                "48;2;212;212;212"  },
  { "bg-gray84",                "48;2;214;214;214"  },
  { "bg-grey84",                "48;2;214;214;214"  },
  { "bg-gray85",                "48;2;217;217;217"  },
  { "bg-grey85",                "48;2;217;217;217"  },
  { "bg-gray86",                "48;2;219;219;219"  },
  { "bg-grey86",                "48;2;219;219;219"  },
  { "bg-gray87",                "48;2;222;222;222"  },
  { "bg-grey87",                "48;2;222;222;222"  },
  { "bg-gray88",                "48;2;224;224;224"  },
  { "bg-grey88",                "48;2;224;224;224"  },
  { "bg-gray89",                "48;2;227;227;227"  },
  { "bg-grey89",                "48;2;227;227;227"  },
  { "bg-gray90",                "48;2;229;229;229"  },
  { "bg-grey90",                "48;2;229;229;229"  },
  { "bg-gray91",                "48;2;232;232;232"  },
  { "bg-grey91",                "48;2;232;232;232"  },
  { "bg-gray92",                "48;2;235;235;235"  },
  { "bg-grey92",                "48;2;235;235;235"  },
  { "bg-gray93",                "48;2;237;237;237"  },
  { "bg-grey93",                "48;2;237;237;237"  },
  { "bg-gray94",                "48;2;240;240;240"  },
  { "bg-grey94",                "48;2;240;240;240"  },
  { "bg-gray95",                "48;2;242;242;242"  },
  { "bg-grey95",                "48;2;242;242;242"  },
  { "bg-gray96",                "48;2;245;245;245"  },
  { "bg-grey96",                "48;2;245;245;245"  },
  { "bg-gray97",                "48;2;247;247;247"  },
  { "bg-grey97",                "48;2;247;247;247"  },
  { "bg-gray98",                "48;2;250;250;250"  },
  { "bg-grey98",                "48;2;250;250;250"  },
  { "bg-gray99",                "48;2;252;252;252"  },
  { "bg-grey99",                "48;2;252;252;252"  },
  { "bg-gray100",               "48;2;255;255;255"  },
  { "bg-grey100",               "48;2;255;255;255"  },
  { "bg-darkgrey",              "48;2;169;169;169"  },
  { "bg-darkgray",              "48;2;169;169;169"  },
  { "bg-darkblue",              "48;2;0;0;139"      },
  { "bg-darkcyan",              "48;2;0;139;139"    },
  { "bg-darkmagenta",           "48;2;139;0;139"    },
  { "bg-darkred",               "48;2;139;0;0"      },
  { "bg-lightgreen",            "48;2;144;238;144"  }
};

/**
 * Creates and initialises the escape code dictionary
 * 
 * This function allocates memory for a dictionary and populates it
 * with all the predefined escape codes for terminal colour and style
 * settings.
 * 
 * @return A pointer to the newly created dictionary
*/
dictionary *create_attribute_dict() {
  dictionary *dict = dictionary_new((size_t) 2048);
  for (size_t i = 0; i < sizeof(attributes) / sizeof(attributes[0]); i++) {
    dictionary_set(dict, attributes[i].name, attributes[i].code);
  }
  return dict;
}


/**
 * Frees the memory allocated for the attribute dictionary
 * 
 * @param dict A pointer to the dictionary to be freed
*/
void free_attribute_dict(dictionary *dict) {
  dictionary_del(dict);
}


void _join_sequence(char *result, size_t result_size, char *sequences[], size_t count) {
  size_t pos = 0;
  for (size_t i = 0; i < count; i++) {
    int written = snprintf(result + pos,
                           result_size - pos,
                           "%s%s",
                           sequences[i],
                           (i < count - 1) ? ";" : "");
    if (written < 0) {
      result = strdup("Error in sequence");
      break;
    }
    if ((size_t)written >= result_size - pos) {
      // truncation
      result = strdup("Sequence truncated");
    }
    pos += written;
  }
}

/**
 * Retrieves the escape code for a style/colour attribute combo
 * 
 * This function searches the attribute dictionary for the escape
 * sequence corresponding to the specified combo of text styles and
 * colours.
 * 
 * @param attribute_dict A pointer to the dictionary of attributes
 * @param combo A semicolon-separated string of names of styles and
 *              colours
 * @return a const char pointer to the escape sequence, or NULL in the
 *         case of an error
*/
const char * get_attribute_combo(dictionary *attribute_dict, const char* combo) {
  // combo is "part1;part2;part3"
  char *str = strdup(combo);
  if (str == NULL) {
    return NULL;
  }

  char *token;
  char *rest = str;
  char *sequences[16]; // TODO: magic number
  int i = 0;
  while ((token = strtok_r(rest, ";", &rest))) {
    char *trimmed_token = trim(token);
    const char * code = dictionary_get(attribute_dict,
                                       (const char*) to_lower((const char*) trimmed_token),
                                       NULL);
    free(trimmed_token);
    if (code == NULL) {
      return NULL;
    }
    sequences[i++] = (char *) code;
  }

  char attribute_sequence[32*16]; // TODO: magic number
  _join_sequence(attribute_sequence, sizeof(attribute_sequence), sequences, i);
  char combo_result[sizeof(attribute_sequence)+8];
  snprintf(combo_result, sizeof(combo_result), "\\[\\e[%sm\\]", attribute_sequence );
  return (const char *) strdup(combo_result);
}

const char *replace_attribute_tokens(const char *string, dictionary *attribute_dict) {
    // Estimate the size of the result string
    size_t result_size = strlen(string) + 1; // +1 for the null terminator
    char *result = malloc(result_size);
    if (!result) return NULL; // Failed to allocate memory

    const char *current = string;
    char *result_ptr = result;

    while (*current) {
        if (strncmp(current, "%{", 2) == 0) {
            char *end = strstr(current, "}");
            if (!end) break; // No closing brace found, break out of the loop

            size_t attr_len = end - current - 2;
            char *attr = strndup(current + 2, attr_len);
            const char *escape_seq = get_attribute_combo(attribute_dict, attr);

            if (escape_seq) {
                // Calculate new size and reallocate result with extra space for escape sequence
                size_t escape_seq_len = strlen(escape_seq);
                size_t new_size = result_size + escape_seq_len - (attr_len + 3); // +3 for "%{}"
                char *temp = realloc(result, new_size);
                if (!temp) {
                    free(result);
                    free(attr);
                    return NULL; // Failed to reallocate memory
                }
                result = temp;
                result_size = new_size;

                // Copy escape sequence to result
                strcpy(result_ptr, escape_seq);
                result_ptr += escape_seq_len;
            }

            free(attr);
            current = end + 1; // Move past the processed token
        } else {
            *result_ptr++ = *current++; // Copy current character and move to the next
        }
    }

    *result_ptr = '\0'; // Null-terminate the result string
    return result;
}


// int main(int argc, char *argv[]) {
//   if (argc < 2) {
//     printf("Usage:\n");
//     printf(" get-terminal-escape-sequence <plaintext style and colour>\n");
//     printf("\n");
//     printf("Example: to get the terminal escape code '\\[\\e[1;34;47m\\]', run:\n");
//     printf(" get-terminal-escape-sequence 'bold;fg blue;bg white'\n");
//     exit(1);
//   }
//   //  printf("arg: %s\n", argv[1]);
//   
//   dictionary *attribute_dict = create_attribute_dict();
// 
//   int exit_status=-1;
//   const char *seq = get_attribute_combo(attribute_dict, argv[1]);
//   if (seq) {
//     printf("%s\n", seq);
//     exit_status=0;
//   }
// 
// 
//   // Free the dictionary
//   free_attribute_dict(attribute_dict);
//   exit(exit_status);
// }
// 
